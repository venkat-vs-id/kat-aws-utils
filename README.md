# kat-aws-utils
useful AWS utils In Python

1. **auto_update_mfa_token.py**

Do you have to enter your MFA everytime you run your AWS CLI code?
Are you using SWITCH roles in your code?
Here is a utility which take yours mfa-code, generates the sts-token and then updates that into your credentials file.

The structure of your credentials file should look like below. If its different then adjust the code accordingly.
Make sure to update the following constants inside the code
C_MFA_SERIAL
C_CREDENTIAL_FILE_WITH_PATH

```
[AutoGeneratedRootAccountMFA]
region=ap-northeast-1
output=json

[RootAccount]
aws_access_key_id=<....>
aws_secret_access_key=<....>
region=ap-northeast-1
output=json

[default]
role_arn = arn:aws:iam::<aws-account-id>>:role/<switch-role>
role_name = <switch-role-name>
region = ap-northeast-1
source_profile=AutoGeneratedRootAccountMFA
```
